#!/bin/bash
##用于同步配置文件
##配置文件路径
HADOOP_ETC=/data1/bigdata/hadoop/etc/hadoop/
##需要同步的文件
ETC_FILES="core-site.xml"
##需要同步的主机(如果没有hosts的主机名映射，可以填ip)
HOSTS="172.16.156.93 172.16.156.102 172.16.156.103 172.16.156.105 172.16.156.106 172.16.156.108 172.16.156.109 172.16.156.111 172.16.156.118"
OP_DATE=$(date +%Y%m%d_%H%M%S)
echo "配置文件开始同步"
for H in $HOSTS;do
 echo "##Sycn for $H##"
 for F in $ETC_FILES;do
  echo "backup and scp..."
  ssh root@$H tail -10 $HADOOP_ETC/$F
  # ssh root@$H cp $HADOOP_ETC/$F $HADOOP_ETC/${F}_${OP_DATE}
  # scp $HADOOP_ETC/$F root@$H:$HADOOP_ETC
 done
done